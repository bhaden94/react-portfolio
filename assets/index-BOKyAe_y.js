import{r as n,w as br,_ as K,a as D,c as Pr,b as Er,d as Dr,u as Rr,g as kr,e as xr,f as q,o as Mr,h as _r,i as fr}from"./index-R88teZQy.js";import{i as B,g as C,D as $r}from"./index-Cz7_hhMG.js";var Ar=typeof window<"u"?n.useLayoutEffect:n.useEffect;function Br(t){var i=t.children,p=t.defer,o=p===void 0?!1:p,a=t.fallback,m=a===void 0?null:a,s=n.useState(!1),h=s[0],w=s[1];return Ar(function(){o||w(!0)},[o]),n.useEffect(function(){o&&w(!0)},[o]),n.createElement(n.Fragment,null,h?i:m)}var Hr=function(i){return{root:{position:"fixed",top:0,left:0,bottom:0,zIndex:i.zIndex.drawer-1},anchorLeft:{right:"auto"},anchorRight:{left:"auto",right:0},anchorTop:{bottom:"auto",right:0},anchorBottom:{top:"auto",bottom:0,right:0}}},Lr=n.forwardRef(function(i,p){var o=i.anchor,a=i.classes,m=i.className,s=i.width,h=K(i,["anchor","classes","className","width"]);return n.createElement("div",D({className:Pr(a.root,a["anchor".concat(Er(o))],m),ref:p,style:Dr({},B(o)?"width":"height",s)},h))});const Yr=br(Hr,{name:"PrivateSwipeArea"})(Lr);var N=3,b=null;function G(t,i){return t==="right"?document.body.offsetWidth-i[0].pageX:i[0].pageX}function J(t,i){return t==="bottom"?window.innerHeight-i[0].clientY:i[0].clientY}function A(t,i){return t?i.clientWidth:i.clientHeight}function pr(t,i,p,o){return Math.min(Math.max(p?i-t:o+i-t,0),o)}function Xr(t,i){for(var p=[];t&&t!==i;){var o=window.getComputedStyle(t);o.getPropertyValue("position")==="absolute"||o.getPropertyValue("overflow-x")==="hidden"?p=[]:(t.clientWidth>0&&t.scrollWidth>t.clientWidth||t.clientHeight>0&&t.scrollHeight>t.clientHeight)&&p.push(t),t=t.parentElement}return p}function Wr(t){var i=t.domTreeShapes,p=t.start,o=t.current,a=t.anchor,m={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return i.some(function(s){var h=o>=p;(a==="top"||a==="left")&&(h=!h);var w=a==="left"||a==="right"?"x":"y",_=s[m.scrollPosition[w]],H=_>0,L=_+s[m.clientLength[w]]<s[m.scrollLength[w]];return h&&L||!h&&H?s:null})}var Cr=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),Nr={enter:fr.enteringScreen,exit:fr.leavingScreen},Or=typeof window<"u"?n.useLayoutEffect:n.useEffect,Vr=n.forwardRef(function(i,p){var o=Rr(),a=kr({name:"MuiSwipeableDrawer",props:D({},i),theme:o}),m=a.anchor,s=m===void 0?"left":m,h=a.disableBackdropTransition,w=h===void 0?!1:h,_=a.disableDiscovery,H=_===void 0?!1:_,L=a.disableSwipeToOpen,Q=L===void 0?Cr:L,Z=a.hideBackdrop,rr=a.hysteresis,er=rr===void 0?.52:rr,tr=a.minFlingVelocity,O=tr===void 0?450:tr,$=a.ModalProps;$=$===void 0?{}:$;var dr=$.BackdropProps,hr=K($,["BackdropProps"]),ar=a.onClose,vr=a.onOpen,l=a.open,nr=a.PaperProps,ir=nr===void 0?{}:nr,gr=a.SwipeAreaProps,or=a.swipeAreaWidth,k=or===void 0?20:or,sr=a.transitionDuration,z=sr===void 0?Nr:sr,cr=a.variant,x=cr===void 0?"temporary":cr,mr=K(a,["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"]),ur=n.useState(!1),wr=ur[0],F=ur[1],r=n.useRef({isSwiping:null}),lr=n.useRef(),V=n.useRef(),d=n.useRef(),Y=n.useRef(!1),I=n.useRef();Or(function(){I.current=null},[l]);var X=n.useCallback(function(e){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=v.mode,u=c===void 0?null:c,f=v.changeTransition,P=f===void 0?!0:f,R=C(o,s),g=["right","bottom"].indexOf(R)!==-1?1:-1,E=B(s),M=E?"translate(".concat(g*e,"px, 0)"):"translate(0, ".concat(g*e,"px)"),T=d.current.style;T.webkitTransform=M,T.transform=M;var y="";if(u&&(y=o.transitions.create("all",xr({timeout:z},{mode:u}))),P&&(T.webkitTransition=y,T.transition=y),!w&&!Z){var S=V.current.style;S.opacity=1-e/A(E,d.current),P&&(S.webkitTransition=y,S.transition=y)}},[s,w,Z,o,z]),W=q(function(e){if(Y.current){if(b=null,Y.current=!1,F(!1),!r.current.isSwiping){r.current.isSwiping=null;return}r.current.isSwiping=null;var v=C(o,s),c=B(s),u;c?u=G(v,e.changedTouches):u=J(v,e.changedTouches);var f=c?r.current.startX:r.current.startY,P=A(c,d.current),R=pr(u,f,l,P),g=R/P;if(Math.abs(r.current.velocity)>O&&(I.current=Math.abs((P-R)/r.current.velocity)*1e3),l){r.current.velocity>O||g>er?ar():X(0,{mode:"exit"});return}r.current.velocity<-O||1-g>er?vr():X(A(c,d.current),{mode:"enter"})}}),j=q(function(e){if(!(!d.current||!Y.current)&&!(b!=null&&b!==r.current)){var v=C(o,s),c=B(s),u=G(v,e.touches),f=J(v,e.touches);if(l&&d.current.contains(e.target)&&b==null){var P=Xr(e.target,d.current),R=Wr({domTreeShapes:P,start:c?r.current.startX:r.current.startY,current:c?u:f,anchor:s});if(R){b=R;return}b=r.current}if(r.current.isSwiping==null){var g=Math.abs(u-r.current.startX),E=Math.abs(f-r.current.startY);g>E&&e.cancelable&&e.preventDefault();var M=c?g>E&&g>N:E>g&&E>N;if(M===!0||(c?E>N:g>N)){if(r.current.isSwiping=M,!M){W(e);return}r.current.startX=u,r.current.startY=f,!H&&!l&&(c?r.current.startX-=k:r.current.startY-=k)}}if(r.current.isSwiping){var T=A(c,d.current),y=c?r.current.startX:r.current.startY;l&&!r.current.paperHit&&(y=Math.min(y,T));var S=pr(c?u:f,y,l,T);if(l)if(r.current.paperHit)S===0&&(r.current.startX=u,r.current.startY=f);else{var yr=c?u<T:f<T;if(yr)r.current.paperHit=!0,r.current.startX=u,r.current.startY=f;else return}r.current.lastTranslate===null&&(r.current.lastTranslate=S,r.current.lastTime=performance.now()+1);var Sr=(S-r.current.lastTranslate)/(performance.now()-r.current.lastTime)*1e3;r.current.velocity=r.current.velocity*.4+Sr*.6,r.current.lastTranslate=S,r.current.lastTime=performance.now(),e.cancelable&&e.preventDefault(),X(S)}}}),U=q(function(e){if(!e.defaultPrevented&&!e.muiHandled&&!(l&&!V.current.contains(e.target)&&!d.current.contains(e.target))){var v=C(o,s),c=B(s),u=G(v,e.touches),f=J(v,e.touches);if(!l){if(Q||e.target!==lr.current)return;if(c){if(u>k)return}else if(f>k)return}e.muiHandled=!0,b=null,r.current.startX=u,r.current.startY=f,F(!0),!l&&d.current&&X(A(c,d.current)+(H?20:-k),{changeTransition:!1}),r.current.velocity=0,r.current.lastTime=null,r.current.lastTranslate=null,r.current.paperHit=!1,Y.current=!0}});n.useEffect(function(){if(x==="temporary"){var e=Mr(d.current);return e.addEventListener("touchstart",U),e.addEventListener("touchmove",j,{passive:!1}),e.addEventListener("touchend",W),function(){e.removeEventListener("touchstart",U),e.removeEventListener("touchmove",j,{passive:!1}),e.removeEventListener("touchend",W)}}},[x,U,j,W]),n.useEffect(function(){return function(){b===r.current&&(b=null)}},[]),n.useEffect(function(){l||F(!1)},[l]);var Tr=n.useCallback(function(e){V.current=_r.findDOMNode(e)},[]);return n.createElement(n.Fragment,null,n.createElement($r,D({open:x==="temporary"&&wr?!0:l,variant:x,ModalProps:D({BackdropProps:D({},dr,{ref:Tr})},hr),PaperProps:D({},ir,{style:D({pointerEvents:x==="temporary"&&!l?"none":""},ir.style),ref:d}),anchor:s,transitionDuration:I.current||z,onClose:ar,ref:p},mr)),!Q&&x==="temporary"&&n.createElement(Br,null,n.createElement(Yr,D({anchor:s,ref:lr,width:k},gr))))});export{Vr as default};
